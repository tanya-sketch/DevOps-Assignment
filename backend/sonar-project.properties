# SonarCloud Analysis (with coverage report)
# - name: SonarCloud Scan
#   uses: SonarSource/sonarcloud-github-action@v2
#   with:
#     projectBaseDir: backend  # Analyze the backend directory
#     args: >
#       -Dsonar.organization=tanya-sketch
#       -Dsonar.projectKey=tanya-sketch_DevOps-Assignment
#       -Dsonar.sources=backend  # Only analyze the backend folder
#       -Dsonar.tests=backend    # Analyze test files
#       -Dsonar.exclusions=**/*.test.js  # Exclude test files from main analysis
#       -Dsonar.javascript.lcov.reportPaths=coverage/lcov-report/lcov-report.json  # Link to Jest's LCOV coverage report
#   env:
#     SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}

# SonarCloud Scan (with coverage report)
- name: SonarCloud Scan
  uses: SonarSource/sonarcloud-github-action@v2
  with:
    projectBaseDir: backend
    args: >
      -Dsonar.organization=tanya-sketch
      -Dsonar.projectKey=tanya-sketch_DevOps-Assignment
      -Dsonar.sources=backend
      -Dsonar.tests=backend
      -Dsonar.exclusions=**/*.test.js
      -Dsonar.javascript.lcov.reportPaths=coverage/lcov-report/lcov-report.json
  env:
    SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}